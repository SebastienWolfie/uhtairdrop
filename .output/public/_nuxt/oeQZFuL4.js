import{_ as $}from"./CohZIaU4.js";import{u as P,l as R}from"./BqACKYKw.js";import{r as W}from"./CXTV7wvo.js";import{s as B}from"./C7Qv54Es.js";import{_ as H}from"./B0PwvC0I.js";import{m as z}from"./zGrFUsMF.js";import{g as E}from"./CBMrxNpD.js";import{_ as A}from"./DlAUqK2U.js";import{r as _,P as j,o as L,Q as O,c as o,b as m,d as p,k,e as t,j as l,u as a,n as V,R as Y,m as q,q as F}from"./BLqpxtBP.js";import"./CigPq3WD.js";import"./N-IBRvSD.js";import"./rx5cLQAs.js";const e=r=>(q("data-v-fc273844"),r=r(),F(),r),J={class:"body"},Q={class:"container"},G=e(()=>t("header",null,[t("div",{class:"uht-mark"},[t("img",{src:H,alt:"UHT Logo",onerror:"this.src='https://dummyimage.com/96x96/6a44ff/ffffff&text=UHT'"}),t("div",null,[t("div",{class:"brand-title"},"Daily Mint • UHT Faucet"),t("span",{class:"badge"},[t("small",null,"24h cycle • Dynamic cap • Withdraw when full")])])])],-1)),K={class:"hero"},X={class:"hero-card"},Z=e(()=>t("h1",null,"Daily UHT Minting",-1)),tt=e(()=>t("p",{class:"lead"}," Your account mints UHT continuously over 24 hours. When the progress reaches the daily cap you can withdraw. ",-1)),st=e(()=>t("div",{class:"keyline"},null,-1)),at={class:"mt-4"},et={class:"progress-meta"},ot=e(()=>t("div",{class:"label"},"Minted",-1)),nt={class:"num"},it={class:"text-right"},lt=e(()=>t("div",{class:"label"},"Hash rate",-1)),rt={class:"num"},ct={class:"progress-wrap mt-3"},dt={class:"progress-bg"},ut={class:"progress-label mt-2 text-sm opacity-90"},_t={class:"mt-6"},ht=["disabled"],mt={key:0},pt={key:1},vt=e(()=>t("p",{class:"mt-3 text-xs opacity-80"}," Tip: Nominate up to 10 addresses on the Nominate page to increase your hash rate and daily cap. ",-1)),ft=e(()=>t("div",{class:"jar-wrap"},[t("div",{class:"jar"},[t("img",{src:H,alt:"UHT Jar"})])],-1)),wt=e(()=>t("footer",null," © 2025 UHT • Universal Health Token — Mint responsibly. ",-1)),yt=50,gt=50,U=24*60*60*1e3,bt={__name:"index",setup(r){const n=P();W();const c=_(0),v=_(0),y=_(window.Date.now()),d=_(!1),g=_([]);let h=null;j(()=>[n.value.walletAddress,n.value.lastDailyClaimAt],async()=>{b()}),L(async()=>{b()});async function b(){var s;g.value=await E(n.value.walletAddress),v.value=Number((s=n.value)==null?void 0:s.lastDailyClaimAt)||window.Date.now(),c.value=g.value.length||0,h=B(()=>{y.value=window.Date.now()},1e3)}O(()=>{h&&(clearInterval(h),h=null)});const i=o(()=>yt+c.value*gt),x=o(()=>Math.max(0,y.value-v.value)),f=o(()=>Math.min(x.value/U,1)),M=o(()=>f.value*100),T=o(()=>Math.floor(f.value*i.value)),u=o(()=>f.value>=1),C=o(()=>u.value?`Withdraw ${i.value} UHT`:`Minting... (${T.value}/${i.value} UHT)`),N=o(()=>{if(u.value)return"Ready to withdraw";const s=U-x.value;if(s<=0)return"Ready to withdraw";const D=Math.floor(s/(1e3*60*60)),w=Math.floor(s%(1e3*60*60)/(1e3*60)),S=Math.floor(s%(1e3*60)/1e3);return`${D}h ${w}m ${S}s`});async function I(){if(!(!u.value||d.value)){d.value=!0;try{await z(i.value,2e-5);const s=window.Date.now();await R({lastDailyClaimAt:s}),n.value.lastDailyClaimAt=s,v.value=s,alert(`Success — withdrew ${i.value} UHT.`)}catch(s){console.error("Withdraw failed",s),alert("Withdraw failed")}finally{d.value=!1}}}return(s,D)=>{const w=$;return m(),p("div",J,[k(w,{class:"md:mx-[10%] mx-[2%] sticky top-[10px] z-50"}),t("div",Q,[G,t("section",K,[t("div",X,[Z,tt,st,t("div",at,[t("div",et,[t("div",null,[ot,t("div",nt,l(a(T))+" / "+l(a(i))+" UHT",1)]),t("div",it,[lt,t("div",rt,l(a(c))+" nom.",1)])]),t("div",ct,[t("div",dt,[t("div",{class:"progress-fill",style:V({width:a(M)+"%"})},null,4)]),t("div",ut,l(Math.round(a(M)))+"% — "+l(a(N)),1)]),t("div",_t,[t("button",{class:Y(["btn btn-primary w-full",{"opacity-60 cursor-not-allowed":!a(u)}]),disabled:!a(u)||a(d),onClick:I},[a(d)?(m(),p("span",mt,"Processing...")):(m(),p("span",pt,l(a(C)),1))],10,ht)]),vt])]),ft]),wt])])}}},xt=A(bt,[["__scopeId","data-v-fc273844"]]),Mt={};function Tt(r,n){const c=xt;return m(),p("div",null,[k(c)])}const Wt=A(Mt,[["render",Tt]]);export{Wt as default};
